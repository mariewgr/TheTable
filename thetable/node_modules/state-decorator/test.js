"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./impl"),e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},e(t,r)};var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(e,r){void 0===r&&(r={});var n=e.actions,c=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(e,["actions"]);return o(t.isFuncConfig(e)?e.getInitialState:function(){return e.initialState},n,r,c)}function o(e,n,i,u,s){void 0===i&&(i={}),void 0===u&&(u={});var f=t.createRef(e(i)),l=t.createRef(i);function p(t,e,r){return o((function(){return null!=t?t:f.current}),n,null!=e?e:l.current,u,null!=r?r:s)}function v(e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var o=t.createRef({state:null,deps:{}});return t.computeDerivedValues(e||f,n||l,o,u),r(r({},(null==e?void 0:e.current)||f.current),o.current.state||{})}return{getInitialState:e,test:function(t){return t(v(),l.current),this},setMockActions:function(t){return p(void 0,void 0,t)},onMount:function(t){return void 0===t&&(t={}),this.onInit(t)},setState:function(t){return p(t,void 0)},setProps:function(t){return p(void 0,t)},setPartialState:function(t){return p(r(r({},f.current),t),void 0)},setPartialProps:function(t){return p(void 0,r(r({},l.current),t))},onPropsChange:function(e,o){void 0===o&&(o=!1);var i=t.createRef(f.current),u=t.createRef(r(r({},l.current),e)),a=t.createRef({state:null,deps:{}}),p=c(n,s),v=this.onPropsChangeImpl(i,u,a,p,(function(t,e,r,n,o){null!=t&&(i.current=t)}),o,!1);return r(r({},v),{test:function(t){t(v)}})},onPropsChangeImpl:function(r,n,o,c,i,a,s){return t.computeDerivedValues(f,l,o,u),t.onPropChange(r,o,n,l.current,c,u,e,i,a,s),{prevState:v(f,l),state:v(r,n),props:n.current,actions:c.current,errorMap:{}}},onInit:function(o){void 0===o&&(o={});var i=r(r({},l.current),o),a=e(i),f=t.createRef(a),p=t.createRef(i),d=t.createRef({state:null,deps:{}}),y=c(n,s),m=function(t,e,r,n,o){null!=t&&(f.current=t)};this.onPropsChangeImpl(f,p,d,y,m,!0,!1),(null==u?void 0:u.onMount)&&u.onMount(t.buildOnMountInvocationContext(f,d,p,y)),this.onPropsChangeImpl(f,p,d,y,m,!0,!0),(null==u?void 0:u.onMountDeferred)&&u.onMountDeferred(t.buildOnMountInvocationContext(f,d,p,y));var R={prevState:null,state:v(f,p),props:p.current,actions:y.current,errorMap:{}};return r(r({},R),{test:function(t){t(R)}})},getAction:function(t){return a(f.current,t,n,l.current,null,u,void 0)}}}function c(e,r){var n=Object.keys(e);return t.createRef(n.reduce((function(t,e){return t[e]=i(null==r?void 0:r[e]),t}),{}))}"function"==typeof SuppressedError&&SuppressedError;var i=function(t){return jest.fn(t)};var u=function(t){function r(e,n,o,c,i){var u=t.call(this,e.message)||this;return Object.setPrototypeOf(u,r.prototype),u.sourceError=e,u.prevState=n,u.props=c,u.state=o,u.actions=i,Error.captureStackTrace&&Error.captureStackTrace(u,r),u}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r}(Error);function a(e,n,o,i,s,f,l){var p=t.createRef(e),v=t.createRef(i),d=s;function y(t,e,r,c){return void 0===c&&(c=l),a(null!=t?t:p.current,n,o,null!=e?e:v.current,null!=r?r:d,f,c)}function m(e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var o=t.createRef({state:null,deps:{}});return t.computeDerivedValues(null!=e?e:p,null!=n?n:v,o,f),r(r({},(null==e?void 0:e.current)||p.current),o.current.state||{})}return{setMockActions:function(t){return y(void 0,void 0,void 0,t)},setState:function(t){return y(t,void 0,void 0)},setProps:function(t){return y(void 0,t,void 0)},setPartialState:function(t){return y(r(r({},p.current),t),void 0,void 0)},setPartialProps:function(t){return y(void 0,r(r({},v.current),t),void 0)},promiseResolves:function(t){return y(void 0,void 0,Promise.resolve(t))},promiseRejects:function(t){return y(void 0,void 0,Promise.reject(t))},test:function(t){return t(m(),v.current),this},call:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a=t.createRef(r({},p.current)),s=t.createRef({state:null,deps:{}});t.computeDerivedValues(a,v,s,f);var y=c(o,l),R=t.createRef({}),S=t.createRef({}),P=function(t){null!=t&&(a.current=t)},h=o[n],O=null;if(t.isSimpleSyncAction(h))t.decorateSimpleSyncAction(n,h,a,s,v,t.createRef(!0),f,P).apply(void 0,e),O=Promise.resolve();else if(t.isSyncAction(h))t.decorateSyncAction(n,r(r({},h),{debounceSideEffectsTimeout:0,debounceTimeout:0}),a,s,v,y,t.createRef(!0),null,f,P,(function(t){})).apply(void 0,e),O=Promise.resolve();else if(t.isAsyncAction(h)){var g=t.createRef({}),M=t.createRef({}),b=t.createRef(!0),A=r({},t.computeAsyncActionInput(h));if(d&&(A.getPromise=function(){return d}),A.optimisticEffects){if(A.effects){var j=A.optimisticEffects,E=A.effects;A.effects=function(t){var e=j(t);return e=r(r({},t.state),e),r(r({},e),E(r(r({},t),{state:e,s:e})))}}else A.effects=A.optimisticEffects;delete A.optimisticEffects}O=t.decorateAsyncAction({actionName:n,derivedStateRef:s,propsRef:v,loadingParallelMapRef:R,errorMapRef:S,promisesRef:g,conflictActionsRef:M,initializedRef:b,options:f,setState:P,stateRef:a,actionsRef:y,action:A,clearError:function(t){}}).apply(void 0,e)}return(null!=O?O:Promise.resolve()).then((function(){return R.current={},{prevState:m(p),state:m(a),props:v.current,errorMap:t.buildErrorMap(S.current),actions:y.current}})).catch((function(t){return Promise.reject(new u(t,m(p),m(a),v.current,y.current))}))}}}exports.ActionError=u,exports.createMockFromStore=function(t,e){return void 0===e&&(e={}),n(t.getConfig(),e)},exports.createMockStore=n,exports.createMockStoreAction=a,exports.createMockStoreV6=o,exports.setMockFactory=function(t){i=t};
//# sourceMappingURL=test.js.map
