"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r,e=require("./impl"),n=function(){return n=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r},n.apply(this,arguments)};function t(r,e,n){if(n||2===arguments.length)for(var t,o=0,s=e.length;o<s;o++)!t&&o in e||(t||(t=Array.prototype.slice.call(e,0,o)),t[o]=e[o]);return r.concat(t||Array.prototype.slice.call(e))}function o(r){return!(r instanceof Function)&&(r.hasOwnProperty("promise")||r.hasOwnProperty("promiseGet"))}function s(r){return r instanceof Function}function i(r){return!(r instanceof Function||r.hasOwnProperty("promise")||r.hasOwnProperty("promiseGet"))}function l(r,e){return null==e?null:n(n({},r),e)}"function"==typeof SuppressedError&&SuppressedError,function(r){r.REJECT="reject",r.IGNORE="ignore",r.KEEP_LAST="keepLast",r.KEEP_ALL="keepAll",r.PARALLEL="parallel",r.REUSE="reuse",r.ABORT="abort"}(r||(r={})),exports.isAdvancedSyncAction=i,exports.isAsyncAction=o,exports.isAsyncPromiseGetAction=function(r){return!(r instanceof Function||r.hasOwnProperty("promise")&&r.hasOwnProperty("promiseGet"))},exports.isSyncAction=s,exports.testAdvancedSyncAction=function(r,e){return i(r)?e(r):Promise.reject(new Error("This action is not a synchronous advanced action"))},exports.testAsyncAction=function(e,t){return o(e)?t(function(e){return"promiseGet"in e?n(n({},e),{promise:e.promiseGet,retryCount:3,conflictPolicy:r.REUSE}):e}(e)):Promise.reject(new Error("This action is not an asynchronous action"))},exports.testSyncAction=function(r,e){return s(r)?e(r):Promise.reject(new Error("This action is not a synchronous action"))},exports.testV6AdvancedSyncAction=function(r,n){return e.isSyncAction(r)?(n({action:function(e,n,t){return l(e,r.effects({s:e,args:n,p:t,ds:null,derived:null,state:e,props:t,res:null,result:null,promiseId:null}))},onActionDone:function(e,n,t,o,s){r.sideEffects({s:e,args:n,p:t,a:o,notifyWarning:s,ds:null,derived:null,state:e,props:t,actions:o,res:null,result:null,promiseId:null,clearError:function(){}})}}),Promise.resolve()):Promise.reject(new Error("This action is not a synchronous action"))},exports.testV6AsyncAction=function(r,n){return e.isAsyncAction(r)?n({abortable:r.abortable,rejectPromiseOnError:r.rejectPromiseOnError,retryCount:r.retryCount,retryDelaySeed:r.retryDelaySeed,isTriggerRetryError:r.isTriggerRetryError,conflictPolicy:r.conflictPolicy,getPromiseId:r.getPromiseId,promise:function(n,t,o,s,i){return e.isAsyncGetPromiseAction(r)?r.getPromise({s:t,args:n,p:o,a:s,abortSignal:i,ds:null,derived:null,state:t,props:o,actions:s,promiseId:null}):r.getGetPromise({s:t,args:n,p:o,a:s,abortSignal:i,ds:null,derived:null,state:t,props:o,actions:s,promiseId:null})},promiseGet:function(n,t,o,s,i){return e.isAsyncGetPromiseGetAction(r)?r.getGetPromise({s:t,args:n,p:o,a:s,abortSignal:i,ds:null,derived:null,state:t,props:o,actions:s,promiseId:null}):null},reducer:function(e,n,t,o){return r.effects?l(e,r.effects({s:e,args:t,p:o,res:n,ds:null,derived:null,state:e,props:o,result:n,promiseId:null})):null},preReducer:function(e,n,t){return r.preEffects?l(e,r.preEffects({s:e,args:n,p:t,ds:null,derived:null,state:e,props:t,promiseId:null})):null},optimisticReducer:function(e,n,o){var s;return r.optimisticEffects?l(e,r.optimisticEffects({s:e,args:n,p:o,ds:null,derived:null,state:e,props:o,promiseId:null===(s=r.getPromiseId)||void 0===s?void 0:s.call.apply(s,t([r],n,!1))})):null},errorReducer:function(e,n,o,s){var i;return r.errorEffects?l(e,r.errorEffects({s:e,args:o,p:s,err:n,ds:null,derived:null,state:e,props:s,error:n,promiseId:null===(i=r.getPromiseId)||void 0===i?void 0:i.call.apply(i,t([r],o,!1))})):null},onDone:function(e,n,o,s,i,l){var c,u;null===(c=r.sideEffects)||void 0===c||c.call(r,{s:e,args:o,p:s,a:i,res:n,notifyWarning:l,ds:null,derived:null,state:e,props:s,actions:i,result:n,promiseId:null===(u=r.getPromiseId)||void 0===u?void 0:u.call.apply(u,t([r],o,!1)),clearError:function(){}})},onFail:function(e,n,o,s,i,l){var c,u;null===(c=r.errorSideEffects)||void 0===c||c.call(r,{s:e,args:o,p:s,a:i,err:n,notifyWarning:l,ds:null,derived:null,state:e,props:s,actions:i,error:n,promiseId:null===(u=r.getPromiseId)||void 0===u?void 0:u.call.apply(u,t([r],o,!1))})},getErrorMessage:function(e,n,o){var s,i;return null===(s=r.getErrorMessage)||void 0===s?void 0:s.call(r,{err:e,p:o,args:n,ds:null,derived:null,state:null,s:null,error:e,props:o,promiseId:null===(i=r.getPromiseId)||void 0===i?void 0:i.call.apply(i,t([r],n,!1))})},getSuccessMessage:function(e,n,o){var s,i;return null===(s=r.getSuccessMessage)||void 0===s?void 0:s.call(r,{res:e,args:n,p:o,ds:null,derived:null,state:null,s:null,result:e,props:o,promiseId:null===(i=r.getPromiseId)||void 0===i?void 0:i.call.apply(i,t([r],n,!1))})}}):Promise.reject(new Error("This action is not a synchronous action"))},exports.testV6SyncAction=function(r,n){if(e.isSimpleSyncAction(r)){return n((function(e,n,t){return l(e,r({s:e,args:n,p:t,ds:null,derived:null,state:e,props:t,promiseId:null}))})),Promise.resolve()}return Promise.reject(new Error("This action is not a synchronous action"))};
//# sourceMappingURL=v5_test.js.map
